<header class="site-header">
  <div class="header-container">
    <!-- Top Row -->
    <div class="header-top">
      <!-- Logo -->
      <div class="header-logo">
        <a href="/">
          {% if section.settings.logo %}
            <img src="{{ section.settings.logo | img_url: '200x' }}" alt="{{ shop.name }}">
          {% else %}
            <span class="logo-text">YIMMS</span>
          {% endif %}
        </a>
      </div>

      <!-- Shop Link - Centered -->
      <div class="header-shop">
        <a href="/collections/all" class="nav-link nav-link--shop">SHOP</a>
      </div>

      <!-- Right Side Navigation -->
      <div class="header-actions">
        <a href="/pages/about" class="nav-link nav-link--shop">ABOUT US</a>
        <a href="/pages/lookbook" class="nav-link nav-link--shop">LOOKBOOK</a>
        <a href="/cart" class="cart-link">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 1L2 5V17C2 17.5304 2.21071 18.0391 2.58579 18.4142C2.96086 18.7893 3.46957 19 4 19H16C16.5304 19 17.0391 18.7893 17.4142 18.4142C17.7893 18.0391 18 17.5304 18 17V5L15 1H5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 5H18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 8C14 9.06087 13.5786 10.0783 12.8284 10.8284C12.0783 11.5786 11.0609 12 10 12C8.93913 12 7.92172 11.5786 7.17157 10.8284C6.42143 10.0783 6 9.06087 6 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          {% if cart.item_count > 0 %}
            <span class="cart-count">{{ cart.item_count }}</span>
          {% endif %}
        </a>
      </div>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" aria-label="Toggle menu" id="mobile-menu-toggle">
        <span class="plus-icon">+</span>
      </button>
    </div>

    <!-- Bottom Row - Main Menu Centered -->
    <nav class="header-nav" id="main-nav">
      <ul class="nav-menu">
        {% for link in linklists[section.settings.menu].links %}
          <li><a href="{{ link.url }}" class="nav-link">{{ link.title | upcase }}</a></li>
        {% endfor %}
      </ul>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu" id="mobile-menu">
      <div class="mobile-menu-content">
        <button class="mobile-menu-close" id="mobile-menu-close">Ã—</button>
        
        <div class="mobile-menu-section">
          <a href="/collections/all" class="mobile-menu-link">SHOP</a>
        </div>

        <nav class="mobile-menu-nav">
          {% for link in linklists[section.settings.menu].links %}
            <a href="{{ link.url }}" class="mobile-menu-link">{{ link.title | upcase }}</a>
          {% endfor %}
        </nav>

        <div class="mobile-menu-section">
          <a href="/pages/about" class="mobile-menu-link">ABOUT US</a>
          <a href="/pages/lookbook" class="mobile-menu-link">LOOKBOOK</a>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  (function() {
    const toggle = document.getElementById('mobile-menu-toggle');
    const menu = document.getElementById('mobile-menu');
    const close = document.getElementById('mobile-menu-close');
    const body = document.body;

    if (!toggle || !menu || !close) return;

    function openMenu() {
      menu.classList.add('active');
      body.style.overflow = 'hidden';
    }

    function closeMenu() {
      menu.classList.remove('active');
      body.style.overflow = '';
    }

    toggle.addEventListener('click', openMenu);
    close.addEventListener('click', closeMenu);

    // Close on overlay click
    menu.addEventListener('click', function(e) {
      if (e.target === menu) {
        closeMenu();
      }
    });

    // Close on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && menu.classList.contains('active')) {
        closeMenu();
      }
    });
  })();
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}